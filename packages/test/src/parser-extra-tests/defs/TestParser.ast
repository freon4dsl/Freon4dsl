language TestParser

// focuses on the different type of properties and how to parse them

// TEST OTHER ASPECTS OF THE PARSER GENERATION
model TestParserExtra {
    name: identifier;
    lim: ProductTest;
}

// TEST REFS TO PARTS
modelunit ProductTest {
    name: identifier;
    product: InsuranceProduct;
    file-extension = "prod";
}

concept InsuranceProduct {
    name: identifier;
    reference partsTerminator: InsurancePart[];
    reference partsInitiator: InsurancePart[];
}

concept InsurancePart {
    name: identifier;                       // internal name
}

// TEST BIN EXP LISTS
modelunit PitExpTest {
    name: identifier;
    value: PitExp;
    file-extension = "pexp";
}

abstract expression PitExp {
}
expression PitSelfExp base PitExp {
}
expression PitAnytypeExp base PitExp {
}
expression PitWhereExp base PitExp {
    conditions: PitBinaryExp[];
}

expression PitWhereExpOneCondition base PitExp {
    condition: PitBinaryExp;
}

expression PitWhereExpSimple base PitExp {
    conditions: PitBinaryExp[];
}

expression PitWhereExpInit base PitExp {
    conditions: PitBinaryExp[];
}

expression PitWhereExpSep base PitExp {
    conditions: PitBinaryExp[];
}

binary expression PitBinaryExp base PitExp {
    left: PitExp;
    right: PitExp;
    priority = 10;
}

// TEST PARTS LIST WITH INITIATOR, RHSLimitedRefOptionalEntry, and RHSPrimOptionalEntry
modelunit PartsInitiatorTest {
    name: identifier;
    value: WithDirectParts;
    file-extension = "pint";
}

concept WithDirectParts {
    partList: PartConcept[];
    myLim?: NonOptionalLimited;
}

concept PartConcept {
    content: string;
    reference optContent?: InsurancePart;
}

limited NonOptionalLimited { FIRST; SECOND; THIRD; }

// TEST RHSPrimListGroupWithInitiator
modelunit PrimsTest {
    name: identifier;
    value: number[];
    file-extension = "prim";
}
