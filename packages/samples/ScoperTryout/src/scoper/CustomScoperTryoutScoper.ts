// Generated by the Freon Language Generator.
import { FreNode, FreNamedNode, FreScoper, FreScoperComposite, FreNamespace } from '@freon4dsl/core';
import { QualifiedName } from '../language/gen/QualifiedName.js'
import { Referable } from '../language/gen/index.js';

/**
 * Class 'CustomScoperTryoutScoper' is meant to be a convenient place to add any
 * custom code for scoping.
 */
export class CustomScoperTryoutScoper implements FreScoper {
    mainScoper: FreScoperComposite;

    resolvePathName(modelelement: FreNode, doNotSearch: string, pathname: string[], metatype?: string): FreNamedNode {
        return undefined;
    }

    isInScope(modelElement: FreNode, name: string, metatype?: string, excludeSurrounding?: boolean): boolean {
        return undefined;
    }

    getVisibleElements(modelelement: FreNode, metatype?: string, excludeSurrounding?: boolean): FreNamedNode[] {
        // console.log('CUSTOM getVisibleElements')
        return undefined;
    }

    getFromVisibleElements(modelelement: FreNode, name: string, metatype?: string, excludeSurrounding?: boolean): FreNamedNode {
        // console.log('CUSTOM getFromVisibleElements')
        return undefined;
    }

    getVisibleNames(modelelement: FreNode, metatype?: string, excludeSurrounding?: boolean): string[] {
        // console.log('CUSTOM getVisibleNames')
        return undefined;
    }

    additionalNamespaces(element: FreNode): FreNode[] {
        return undefined;
    }

    replacementNamespace(node: FreNode): FreNamespace | undefined {
        // console.log('CUSTOM getAlternativeScope for ' + node.freId() + " of type " + node.freLanguageConcept());

        if (!!node && node.freLanguageConcept() == "QualifiedName") {
            let container = node.freOwner();
            if (!!container) {
                if (container.freLanguageConcept() == "QualifiedName") { // note instanceof does not function here!!
                    const myPart: Referable = (container as QualifiedName).part.referred;
                    // console.log('returning PART: ' + myPart.freId() + " of type " + myPart.freLanguageConcept());
                    return FreNamespace.create(myPart);
                } else {
                    // console.log('returning OWNER: ' + container.freId() + " of type " + container.freLanguageConcept());
                    return FreNamespace.create(container);
                }
            } else {
                console.error("getAlternativeScope: no owner found.");
            }
        }
        return undefined;
    }
}
