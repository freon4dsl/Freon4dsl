// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Checking the scoper generator > scope file for 'test-correct1' is correctly generated 1`] = `
"// Generated by the Freon Language Generator.
import {
    FreScoperBase,
    type FreNode,
    FreNamespaceInfo,
    isNullOrUndefined,
    FreNodeReference,
    notNullOrUndefined,
    FreLanguage,
} from "@freon4dsl/core";
import { EE, AA, FF, BB, DD } from "../language/index.js";

import { LanguageEnvironment } from "../index.js";

/**
 * Class ROOTScoper implements the scoper generated from, if present, the scoper definition,
 * otherwise this class implements the default scoper.
 */
export class ROOTScoper extends FreScoperBase {
    /**
     * Returns all FreNodes or FreNodeReferences that are defined as alternative namespaces for 'node'.
     * @param node
     */
    public alternativeNamespaces(node: FreNode): FreNamespaceInfo[] {
        const result: FreNamespaceInfo[] = [];
        // namespace replacement for EE
        if (node instanceof EE) {
            // generated from 'self.owner();'
            const xx0 = node.freOwner();
            if (!isNullOrUndefined(xx0)) {
                result.push(new FreNamespaceInfo(xx0, false));
            }
            // generated from 'self.ee.dd.cc.bb.aa;'
            const xx1: FreNodeReference<AA> | undefined = node.ee?.dd?.cc?.bb?.aa;
            if (!isNullOrUndefined(xx1)) {
                result.push(new FreNamespaceInfo(xx1, false));
            }
        }
        // namespace replacement for FF
        if (node instanceof FF) {
            // generated from 'self.ee.dd.cc.bb.aa;'
            const xx0: FreNodeReference<AA> | undefined = node.ee?.dd?.cc?.bb?.aa;
            if (!isNullOrUndefined(xx0)) {
                result.push(new FreNamespaceInfo(xx0, false));
            }
        }

        return result;
    }

    /**
     * Returns all FreNodes or FreNodeReferences that are defined as imported namespaces for 'node'.
     * @param node
     */
    public importedNamespaces(node: FreNode): FreNamespaceInfo[] {
        const result: FreNamespaceInfo[] = [];
        // namespace addition for AA
        if (node instanceof AA) {
            // generated from 'self.AAprop7;'
            const xx0: BB | undefined = node.AAprop7;
            if (!isNullOrUndefined(xx0)) {
                result.push(new FreNamespaceInfo(xx0, false));
            }
            // generated from 'self.AAprop8;'
            const list1 = node.AAprop8;
            if (notNullOrUndefined(list1)) {
                for (let loopVariable of list1) {
                    if (!isNullOrUndefined(loopVariable)) {
                        result.push(new FreNamespaceInfo(loopVariable, false));
                    }
                }
            }
            // generated from 'self.AAprop11;'
            const xx2: DD | undefined = node.AAprop11;
            if (!isNullOrUndefined(xx2)) {
                result.push(new FreNamespaceInfo(xx2, false));
            }
            // generated from 'recursive self.AAprop12;'
            const list3 = node.AAprop12;
            if (notNullOrUndefined(list3)) {
                for (let loopVariable of list3) {
                    if (!isNullOrUndefined(loopVariable)) {
                        result.push(new FreNamespaceInfo(loopVariable, true));
                    }
                }
            }
            // generated from 'self.AAprop13;'
            const xx4: FreNodeReference<FF> | undefined = node.AAprop13;
            if (!isNullOrUndefined(xx4)) {
                result.push(new FreNamespaceInfo(xx4, false));
            }
            // generated from 'self.AAprop14;'
            const list5 = node.AAprop14;
            if (notNullOrUndefined(list5)) {
                for (let loopVariable of list5) {
                    if (!isNullOrUndefined(loopVariable)) {
                        result.push(new FreNamespaceInfo(loopVariable, false));
                    }
                }
            }
        }
        // namespace addition for BB
        if (node instanceof BB) {
            // generated from 'self.BBprop11;'
            const xx0: DD | undefined = node.BBprop11;
            if (!isNullOrUndefined(xx0)) {
                result.push(new FreNamespaceInfo(xx0, false));
            }
            // generated from 'self.DDprop8.type();'
            const list1 = node.DDprop8.map((x: BB) => LanguageEnvironment.getInstance().typer.inferType(x).toAstElement());
            if (notNullOrUndefined(list1)) {
                for (let loopVariable of list1) {
                    if (!isNullOrUndefined(loopVariable)) {
                        result.push(new FreNamespaceInfo(loopVariable, false));
                    }
                }
            }
            // generated from 'owner().if(BB).type();'
            const xx2 = LanguageEnvironment.getInstance()
                .typer.inferType(FreLanguage.getInstance().metaConformsToType(node.freOwner(), "BB") ? (node.freOwner() as BB) : undefined)
                ?.toAstElement();
            if (!isNullOrUndefined(xx2)) {
                result.push(new FreNamespaceInfo(xx2, false));
            }
        }
        // namespace addition for DD
        if (node instanceof DD) {
            // generated from 'self.DDprop8.type();'
            const list0 = node.DDprop8.map((x: BB) => LanguageEnvironment.getInstance().typer.inferType(x).toAstElement());
            if (notNullOrUndefined(list0)) {
                for (let loopVariable of list0) {
                    if (!isNullOrUndefined(loopVariable)) {
                        result.push(new FreNamespaceInfo(loopVariable, false));
                    }
                }
            }
            // generated from 'owner().if(BB).type();'
            const xx1 = LanguageEnvironment.getInstance()
                .typer.inferType(FreLanguage.getInstance().metaConformsToType(node.freOwner(), "BB") ? (node.freOwner() as BB) : undefined)
                ?.toAstElement();
            if (!isNullOrUndefined(xx1)) {
                result.push(new FreNamespaceInfo(xx1, false));
            }
        }

        return result;
    }
}
"
`;
